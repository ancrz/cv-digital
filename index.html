<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anthony Cruz — DevOps Developer</title>
  <meta name="description" content="DevOps Developer — 8+ años TI, 4+ años DevOps/SRE. CI/CD, IaC, Kubernetes, Docker, Terraform. Certificado Google Cloud.">
  <meta name="author" content="Anthony Cruz">
  <meta property="og:title" content="Anthony Cruz — DevOps Developer">
  <meta property="og:description" content="DevOps Developer — 8+ años TI, 4+ años DevOps/SRE. Certificado Google Cloud. Disponible remoto.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ancrz.github.io/cv-digital/">
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/110553929?v=4">
  <meta name="keywords" content="DevOps Developer, SRE, Platform Engineer, Cloud Engineer, CI/CD, Docker, Kubernetes, Terraform, Ansible, Helm, Jenkins, GitLab CI, GitHub Actions, ArgoCD, GitOps, Python, Go, GCP, IaC, Infrastructure as Code, ELK Stack, Grafana, Observability, Containerization, Linux, Schema-Driven Development">

  <!-- JSON-LD: Structured data for search engines and AI scrapers -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Anthony Cruz",
    "jobTitle": "DevOps Developer",
    "description": "DevOps Developer con 8+ años en infraestructura TI y 4+ años en DevOps/SRE. CI/CD, IaC, Kubernetes, Docker, Terraform, GitOps. Certificado Google Cloud.",
    "url": "https://ancrz.github.io/cv-digital/",
    "image": "https://avatars.githubusercontent.com/u/110553929?v=4",
    "email": "Anthony_Cruz@outlook.com",
    "telephone": "+58 414 377 1069",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Caracas",
      "addressRegion": "Distrito Capital",
      "addressCountry": "VE"
    },
    "sameAs": [
      "https://www.linkedin.com/in/ancrz/",
      "https://github.com/ancrz",
      "https://hub.docker.com/repositories/ancrz",
      "https://linktr.ee/anthony.crzr"
    ],
    "knowsAbout": [
      "DevOps", "SRE", "Schema-Driven Development", "GitOps",
      "CI/CD", "Docker", "Kubernetes", "Terraform", "Ansible", "Helm",
      "Jenkins", "GitLab CI", "GitHub Actions", "ArgoCD",
      "Python", "Go", "GCP", "Infrastructure as Code", "Linux",
      "ELK Stack", "Grafana", "Observability", "Containerization",
      "Playwright", "RabbitMQ", "ETL Pipelines"
    ],
    "hasCredential": [
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Architecting with GKE: Workloads",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Google Cloud" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Deploy and Manage Apigee X",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Google Cloud" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Implement DevOps in Google Cloud",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Google Cloud" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Getting Started with Terraform",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Google Cloud" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Elastic Infrastructure: Scaling and Automation",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Google Cloud" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Linux Cloud and DevOps",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Coursera" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Securing Linux Systems",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Coursera" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Managing Linux Systems",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Coursera" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Learning Linux for LFCA Certification",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "Coursera" }
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "EF SET Certificate — Upper Intermediate (B2)",
        "credentialCategory": "Certificate",
        "recognizedBy": { "@type": "Organization", "name": "EF SET" }
      }
    ],
    "alumniOf": {
      "@type": "EducationalOrganization",
      "name": "UPTM Kléber Ramírez",
      "address": { "@type": "PostalAddress", "addressLocality": "Mérida", "addressCountry": "VE" }
    }
  }
  </script>

  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
          colors: {
            navy: { 800: '#1E293B', 900: '#0F172A', 950: '#0B1120' },
            accent: { violet: '#8B5CF6', green: '#10B981' }
          }
        }
      }
    }
  </script>

  <!-- Dark mode default + loading lang -->
  <script>
    if (localStorage.getItem('theme') !== 'light') {
      document.documentElement.classList.add('dark');
    }
    if (localStorage.getItem('lang') === 'en') {
      document.addEventListener('DOMContentLoaded', () => {
        const lt = document.getElementById('loading-text');
        if (lt) lt.textContent = 'Loading CV...';
      });
    }
  </script>

  <style>
    body { font-family: 'Inter', sans-serif; }
    .fade-in { opacity: 0; transform: translateY(16px); transition: opacity 0.5s ease-out, transform 0.5s ease-out; }
    .fade-in.visible { opacity: 1; transform: translateY(0); }
    /* Card hover zoom (desktop hover) */
    .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .card-hover:hover { transform: scale(1.02); box-shadow: 0 20px 40px -12px rgba(0,0,0,0.25); }

    /* Mobile: progressive scroll zoom (overrides hover on touch) */
    @media (hover: none) {
      .card-hover:hover { transform: none; box-shadow: none; }
      .card-hover { will-change: transform; }
    }

    /* Tool badge hover */
    .tool-badge { transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease; cursor: pointer; }
    .tool-badge:hover { transform: scale(1.1); border-color: #8B5CF6; box-shadow: 0 0 12px rgba(139,92,246,0.4); }
    .tool-badge.active { transform: scale(1.1); border-color: #10B981; box-shadow: 0 0 12px rgba(16,185,129,0.4); }

    /* Core skill bar reactive transition */
    .skill-bar-fill { transition: background-color 0.4s ease, width 1s ease; }
    .skill-bar-fill.highlight { background-color: #10B981 !important; }

    /* Skill row highlight */
    .skill-row { transition: opacity 0.3s ease, transform 0.3s ease; }
    .skill-row.dimmed { opacity: 0.3; }
    .skill-row.highlighted { transform: scale(1.03); }

    /* Heatmap heartbeat pulse */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .heatmap-cell-active { animation: pulse 2s ease-in-out infinite; }

    /* Back to top button */
    .btn-top { opacity: 0; pointer-events: none; transition: opacity 0.3s ease, transform 0.3s ease; transform: translateY(8px); }
    .btn-top.visible { opacity: 1; pointer-events: auto; transform: translateY(0); }

    /* Contact icon buttons */
    .contact-icon-btn {
      display: inline-flex; align-items: center; justify-content: center;
      width: 40px; height: 40px; border-radius: 50%;
      border: 2px solid rgba(139,92,246,0.3);
      transition: all 0.3s ease; color: #8B5CF6;
    }
    .contact-icon-btn:hover { border-color: #8B5CF6; background: rgba(139,92,246,0.1); transform: scale(1.15); box-shadow: 0 0 16px rgba(139,92,246,0.3); }
    .contact-icon-btn.whatsapp { color: #25D366; border-color: rgba(37,211,102,0.3); }
    .contact-icon-btn.whatsapp:hover { border-color: #25D366; background: rgba(37,211,102,0.1); box-shadow: 0 0 16px rgba(37,211,102,0.3); }

    /* Share button pulse CTA */
    .share-btn {
      position: relative;
      transition: all 0.3s ease;
    }
    .share-btn:hover { transform: scale(1.05); box-shadow: 0 8px 24px rgba(139,92,246,0.35); }
    .share-btn:active { transform: scale(0.97); }
    .share-btn::after {
      content: '';
      position: absolute; inset: -3px;
      border-radius: inherit;
      border: 2px solid rgba(139,92,246,0.4);
      animation: share-pulse 2.5s ease-in-out infinite;
      pointer-events: none;
    }
    @keyframes share-pulse {
      0%, 100% { opacity: 0; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.04); }
    }

    /* Toast notification */
    .toast {
      position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%) translateY(20px);
      padding: 0.75rem 1.5rem; border-radius: 0.75rem;
      background: #1E293B; color: white; font-size: 0.875rem; font-weight: 500;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      opacity: 0; transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 200; pointer-events: none;
    }
    .toast.visible { opacity: 1; transform: translateX(-50%) translateY(0); }

    /* Language toggle: active/inactive states */
    .lang-opt {
      color: #9ca3af; /* gray-400 */
      background: transparent;
    }
    .lang-opt.active {
      color: white;
      background: #10B981; /* accent-green */
      box-shadow: 0 0 8px rgba(16,185,129,0.4);
    }
    .lang-opt:not(.active):hover {
      color: #6b7280;
      background: rgba(156,163,175,0.15);
    }
    .dark .lang-opt { color: #6b7280; }
    .dark .lang-opt.active { color: white; background: #10B981; }
    .dark .lang-opt:not(.active):hover { color: #9ca3af; background: rgba(156,163,175,0.1); }

    /* Print utilities */
    .print-only { display: none !important; }

    /* ================================================================
       ATS-COMPATIBLE PRINT STYLESHEET v3.2.1
       Recruiter-friendly: readable, accessible, visually clean
       ================================================================ */
    @media print {
      /* Visibility toggles */
      .no-print, .print-hide { display: none !important; }
      .print-only { display: block !important; }

      /* Base reset — FORCE all text to solid black */
      html { font-size: 15px; }
      * { color: #1a1a1a !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      body { background: white !important; margin: 0 !important; padding: 0 !important; }

      /* Force single column — kill all spacing from Tailwind utility classes */
      .container { max-width: 100% !important; padding: 0 !important; margin: 0 !important; }
      .py-8 { padding-top: 0 !important; padding-bottom: 0 !important; }
      .px-4 { padding-left: 0 !important; padding-right: 0 !important; }
      main { display: block !important; }
      main > section { display: block !important; width: 100% !important; max-width: 100% !important; }

      /* Kill Tailwind gap/space utilities inside print */
      .space-y-6 > * + * { margin-top: 0.15rem !important; }
      .space-y-4 > * + * { margin-top: 0.1rem !important; }
      .gap-8 { gap: 0 !important; }
      .mb-8 { margin-bottom: 0.2rem !important; }
      .mb-4 { margin-bottom: 0.15rem !important; }
      .mb-6 { margin-bottom: 0.1rem !important; }

      /* ── HEADER: clean professional banner ── */
      #header { border-radius: 0 !important; box-shadow: none !important; border: none !important; border-bottom: 3px solid #4f46e5 !important; margin-bottom: 0.2rem !important; overflow: visible !important; background: #f8f7ff !important; }
      #header > div { padding: 0.35rem 0.5rem !important; flex-direction: column !important; align-items: flex-start !important; gap: 0.05rem !important; }
      #header .flex-shrink-0 { display: none !important; }
      #header .bg-accent-green { display: none !important; }
      #header .contact-icon-btn { display: none !important; }
      #header a[href*="whatsapp"] { display: none !important; }
      #header i { display: none !important; }
      #header h1 { font-size: 1.5rem !important; margin-bottom: 0 !important; line-height: 1.1 !important; color: #1a1a1a !important; font-weight: 800 !important; }
      #header h2 { font-size: 0.95rem !important; color: #4f46e5 !important; margin: 0 !important; padding: 0 !important; border: none !important; text-transform: none !important; letter-spacing: normal !important; font-weight: 600 !important; }
      #header p { display: none !important; }
      #header .min-w-\[260px\] { border: none !important; padding: 0 !important; margin: 0.1rem 0 0 !important; min-width: unset !important; flex-direction: row !important; flex-wrap: wrap !important; gap: 0.1rem 1rem !important; }
      #header a[href^="mailto"], #header .flex.items-center.gap-3 { font-size: 0.85rem !important; color: #374151 !important; }
      #header .flex.items-center.gap-3 > i { display: none !important; }

      /* ── SECTION HEADINGS: ATS standard with indigo accent ── */
      h2 { color: #1a1a1a !important; font-size: 0.9rem !important; text-transform: uppercase !important; letter-spacing: 0.06em !important; border-bottom: 2px solid #4f46e5 !important; padding-bottom: 0.1rem !important; margin-bottom: 0.2rem !important; margin-top: 0.55rem !important; page-break-after: avoid !important; font-weight: 700 !important; }
      h2 > i { display: none !important; }

      /* ── CARDS: strip decoration ── */
      .card-hover, .card-hover:hover { transform: none !important; box-shadow: none !important; border-radius: 0 !important; background: transparent !important; border: none !important; }

      /* ── EXPERIENCE: indigo left border, clean bullets ── */
      #experiencia { margin-bottom: 0 !important; }
      #experiencia article { border: none !important; padding: 0.1rem 0 !important; margin-bottom: 0.15rem !important; background: transparent !important; border-radius: 0 !important; }
      #experiencia h4 { color: #1a1a1a !important; font-size: 0.88rem !important; margin-bottom: 0 !important; }
      #experiencia h4 span { color: #4b5563 !important; }
      #experiencia article > span { color: #374151 !important; }
      #experiencia .flex-wrap { margin-bottom: 0.05rem !important; }
      #experiencia ul { padding-left: 1rem !important; margin: 0.05rem 0 !important; }
      #experiencia li { display: list-item !important; list-style-type: disc !important; gap: 0 !important; margin-bottom: 0.05rem !important; color: #1a1a1a !important; }
      #experiencia li i { display: none !important; }
      #experiencia li span { display: inline !important; font-size: 0.82rem !important; color: #1a1a1a !important; line-height: 1.35 !important; }

      /* ── EDUCATION: compact ── */
      #educacion { margin-bottom: 0 !important; }
      #educacion > div { border: none !important; padding: 0.1rem 0 !important; box-shadow: none !important; background: transparent !important; }
      #educacion h4 { color: #1a1a1a !important; font-size: 0.88rem !important; }
      #educacion p { color: #374151 !important; font-size: 0.85rem !important; margin: 0 !important; }

      /* ── CERTIFICATES: 2-column compact, SHOW cert names ── */
      #certificados .grid { display: block !important; columns: 2 !important; column-gap: 1rem !important; }
      #certificados .grid > div { break-inside: avoid !important; border: none !important; box-shadow: none !important; padding: 0.15rem 0 !important; background: transparent !important; border-radius: 0 !important; border-bottom: 1px solid #e5e7eb !important; }
      #certificados .grid > div p.font-medium { color: #1a1a1a !important; font-size: 0.82rem !important; font-weight: 600 !important; }
      #certificados .rounded-full { background: transparent !important; padding: 0 !important; border-radius: 0 !important; font-weight: 600 !important; color: #4f46e5 !important; font-size: 0.72rem !important; }
      #certificados span.text-xs { color: #6b7280 !important; }

      /* ── SKILLS: hide visual bars, show print text ── */
      #core-skills { border: none !important; box-shadow: none !important; padding: 0 !important; background: transparent !important; }
      #core-skills > h4 { display: none !important; }
      #core-skills .grid.grid-cols-2 { display: none !important; }

      /* ── TOOLS: hide visual badges, show print text ── */
      #tools-platforms { border: none !important; box-shadow: none !important; padding: 0 !important; background: transparent !important; }
      #tools-platforms > h4 { display: none !important; }
      #tools-platforms .flex.flex-wrap { display: none !important; }

      /* ── HIDE: GitHub activity, footer, Stacks heading ── */
      #github-activity { display: none !important; }
      main > section:last-child > h2:first-child { display: none !important; }
      footer { display: none !important; }

      /* ── CANDIDATE ALIGNMENT: clean grid ── */
      #candidate-alignment { background: transparent !important; border: none !important; box-shadow: none !important; padding: 0 !important; border-radius: 0 !important; }
      #candidate-alignment strong { color: #4f46e5 !important; }
      #candidate-alignment span { color: #1a1a1a !important; }

      /* ── PRINT SUMMARY styling ── */
      #print-summary { margin-bottom: 0.1rem !important; }
      #print-summary p { color: #1a1a1a !important; font-size: 0.85rem !important; line-height: 1.4 !important; }

      /* ── Links: no URL append ── */
      a[href]::after { content: none !important; }

      /* ── Animations: disable ── */
      .fade-in { opacity: 1 !important; transform: none !important; }
      .heatmap-cell-active { animation: none !important; }

      /* ── Page breaks: allow content to flow naturally ── */
      section { break-inside: auto; }
      article { break-inside: avoid; }
      h2, h3, h4 { break-after: avoid; }

      /* ── Page 2 spacing: balance content distribution ── */
      #core-skills > .print-only { margin-top: 0.5rem !important; }
      #tools-platforms > .print-only { margin-top: 0.4rem !important; }
    }

    @page { size: letter; margin: 0.6cm 0.8cm; }
  </style>
</head>
<body class="bg-gray-100 dark:bg-navy-950 text-gray-800 dark:text-gray-200 min-h-screen transition-colors duration-300">

  <!-- Loading -->
  <div id="loading" class="min-h-screen flex items-center justify-center">
    <div class="text-center">
      <div class="inline-block w-8 h-8 border-4 border-accent-violet border-t-transparent rounded-full animate-spin"></div>
      <p id="loading-text" class="mt-4 text-gray-500 dark:text-gray-400">Cargando CV...</p>
    </div>
  </div>

  <!-- App -->
  <div id="app" class="hidden">
    <div class="container mx-auto px-4 py-8 max-w-7xl">

      <!-- HEADER -->
      <header id="header" class="card-hover bg-white dark:bg-navy-900 rounded-2xl shadow-xl overflow-hidden mb-8 border border-gray-200 dark:border-gray-800">
      </header>

      <!-- MAIN GRID: 2 columns on desktop -->
      <main class="grid grid-cols-1 lg:grid-cols-12 gap-8">

        <!-- LEFT COLUMN: Experiencia + Educacion + Certificados -->
        <section class="lg:col-span-7 space-y-6">
          <!-- EXPERIENCIA -->
          <div id="experiencia" class="fade-in space-y-4">
            <h2 class="text-xl font-bold text-accent-violet mb-4">
              <i class="fa-solid fa-server mr-2"></i><span class="print-hide">Infraestructura (Experiencia)</span><span class="print-only" style="display:none !important">Experiencia Profesional</span>
            </h2>
          </div>

          <!-- EDUCACION -->
          <div id="educacion" class="fade-in">
            <h2 class="text-xl font-bold text-accent-violet mb-4">
              <i class="fa-solid fa-graduation-cap mr-2"></i><span id="edu-heading-text">Formación Académica</span>
            </h2>
          </div>

          <!-- CERTIFICADOS -->
          <div id="certificados" class="fade-in">
            <h2 class="text-xl font-bold text-accent-violet mb-4">
              <i class="fa-solid fa-certificate mr-2"></i><span class="print-hide">Certificados</span><span class="print-only" style="display:none !important">Certificaciones</span>
            </h2>
          </div>

        </section>

        <!-- RIGHT COLUMN: Skills + GitHub -->
        <section class="lg:col-span-5 space-y-6">

          <h2 class="text-xl font-bold text-accent-violet mb-4">
            <i class="fa-solid fa-layer-group mr-2"></i><span id="stacks-heading-text">Stacks (Skills)</span>
          </h2>

          <!-- CORE TECHNOLOGIES (progress bars) -->
          <div id="core-skills" class="card-hover bg-white dark:bg-navy-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 fade-in">
            <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-5 border-b border-gray-100 dark:border-gray-700 pb-2">Core Technologies</h4>
          </div>

          <!-- TOOLS & PLATFORMS (badges) -->
          <div id="tools-platforms" class="card-hover bg-white dark:bg-navy-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 fade-in">
            <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-4 border-b border-gray-100 dark:border-gray-700 pb-2">Tools & Platforms</h4>
          </div>

          <!-- GITHUB ACTIVITY -->
          <div id="github-activity" class="card-hover bg-white dark:bg-navy-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 fade-in">
          </div>

        </section>
      </main>

      <!-- FOOTER -->
      <footer class="mt-12 mb-8 pt-8 border-t-2 border-gray-300 dark:border-gray-700">
        <!-- Action buttons: 2x2 grid mobile (CTA right for right-handed), row on desktop -->
        <div class="grid grid-cols-2 sm:flex sm:flex-row items-center justify-center gap-3 sm:gap-4 mb-6 px-4 sm:px-0">
          <!-- Mobile col 1 row 1 / Desktop order 3 -->
          <a id="footer-contact" href="#" class="order-1 sm:order-3 inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 font-medium text-sm hover:border-accent-violet hover:text-accent-violet dark:hover:border-accent-violet dark:hover:text-accent-violet transition-all">
            <i class="fa-solid fa-envelope"></i>
            Contact Me
          </a>
          <!-- Mobile col 2 row 1 / Desktop order 1 -->
          <a onclick="downloadCV()" class="no-print order-2 sm:order-1 inline-flex items-center justify-center gap-2 px-6 py-2.5 sm:py-3 rounded-xl bg-accent-violet text-white font-semibold text-sm shadow-lg hover:bg-violet-600 transition-all cursor-pointer hover:shadow-xl hover:scale-105 active:scale-95">
            <i class="fa-solid fa-file-arrow-down text-base"></i>
            Descargar CV
          </a>
          <!-- Mobile col 1 row 2 / Desktop order 4 -->
          <a id="footer-github" href="#" target="_blank" rel="noopener" class="order-3 sm:order-4 inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 font-medium text-sm hover:border-accent-violet hover:text-accent-violet dark:hover:border-accent-violet dark:hover:text-accent-violet transition-all">
            <i class="fa-brands fa-github"></i>
            GitHub
          </a>
          <!-- Mobile col 2 row 2 / Desktop order 2 -->
          <button onclick="shareCV()" class="no-print order-4 sm:order-2 share-btn inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl bg-accent-violet text-white font-semibold text-sm shadow-md">
            <i class="fa-solid fa-share-nodes"></i>
            Referir perfil
          </button>
        </div>
        <!-- Meta info: stacked on mobile, inline on desktop -->
        <div class="flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-3 text-gray-400 dark:text-gray-500 text-xs">
          <span id="footer-updated"></span>
          <span class="hidden sm:inline text-gray-300 dark:text-gray-600">|</span>
          <span>Schema-Driven CV</span>
          <span class="hidden sm:inline text-gray-300 dark:text-gray-600">|</span>
          <span>&copy; <script>document.write(new Date().getFullYear())</script> Anthony Cruz</span>
        </div>
      </footer>

    </div>
  </div>

  <!-- Floating control pill: theme + language -->
  <div class="no-print fixed top-4 right-4 z-50 flex items-center gap-0 bg-white dark:bg-navy-800 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 p-1">
    <!-- Dark mode toggle -->
    <button id="theme-toggle" class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:text-accent-violet dark:hover:text-accent-violet transition-colors" aria-label="Cambiar tema">
      <i id="icon-theme" class="fa-solid fa-sun text-sm"></i>
    </button>
    <!-- Divider -->
    <div class="w-px h-5 bg-gray-200 dark:bg-gray-700"></div>
    <!-- Language toggle: ES | EN -->
    <div id="lang-toggle" class="flex items-center gap-0.5 px-1 cursor-pointer select-none" role="radiogroup" aria-label="Language">
      <button id="lang-es" class="lang-opt px-1.5 py-1 rounded-full text-[10px] font-bold tracking-wide transition-all duration-300" aria-label="Español">ES</button>
      <button id="lang-en" class="lang-opt px-1.5 py-1 rounded-full text-[10px] font-bold tracking-wide transition-all duration-300" aria-label="English">EN</button>
    </div>
  </div>

  <!-- Back to Top (floating) -->
  <button id="btn-back-top" class="btn-top no-print fixed bottom-6 right-6 z-50 p-3 rounded-full bg-accent-violet text-white shadow-lg hover:bg-violet-600 transition-colors" aria-label="Volver arriba">
    <i class="fa-solid fa-arrow-up w-5 h-5"></i>
  </button>

  <script>
    // =========================================================================
    // i18n: Language system
    // =========================================================================
    let currentLang = localStorage.getItem('lang') || 'es';
    let cvData = null; // Global reference for re-renders

    // UI strings not in cv.json (hardcoded in HTML/JS)
    const i18nUI = {
      es: {
        loading: 'Cargando CV...',
        infraExperience: 'Infraestructura (Experiencia)',
        education: 'Formación Académica',
        certificates: 'Certificados',
        stacks: 'Stacks (Skills)',
        downloadCV: 'Descargar CV',
        referProfile: 'Referir perfil',
        shareCTA: 'Conoces a alguien que busque DevOps?',
        contactMe: 'Contact Me',
        available: 'Disponible',
        serviceYears: '{y} y {m} entregando calidad de servicio',
        serviceYearsOnly: '{y} entregando calidad de servicio',
        serviceMonthsOnly: '{m} entregando calidad de servicio',
        year: 'año',
        years: 'años',
        month: 'mes',
        months: 'meses',
        linkCopied: 'Link copiado al portapapeles',
        shareText: 'DevOps Developer con 8+ años en TI y 4+ en DevOps/SRE. Docker, Kubernetes, Terraform, CI/CD. Certificado Google Cloud. Disponible remoto.',
        present: 'Presente',
        // ATS print labels
        ats_dominio: 'Dominio',
        ats_stack: 'Stack Core',
        ats_cicd: 'CI/CD',
        ats_obs: 'Observabilidad',
        ats_lang: 'Lenguajes',
        ats_cloud: 'Cloud',
        ats_method: 'Metodología',
        ats_level: 'Nivel',
        ats_certs: 'Certificaciones',
        ats_english: 'Inglés',
        ats_avail: 'Disponibilidad'
      },
      en: {
        loading: 'Loading CV...',
        infraExperience: 'Infrastructure (Experience)',
        education: 'Education',
        certificates: 'Certificates',
        stacks: 'Stacks (Skills)',
        downloadCV: 'Download CV',
        referProfile: 'Refer profile',
        shareCTA: 'Know someone looking for a DevOps?',
        contactMe: 'Contact Me',
        available: 'Available',
        serviceYears: '{y} and {m} delivering quality service',
        serviceYearsOnly: '{y} delivering quality service',
        serviceMonthsOnly: '{m} delivering quality service',
        year: 'year',
        years: 'years',
        month: 'month',
        months: 'months',
        linkCopied: 'Link copied to clipboard',
        shareText: 'DevOps Developer with 8+ years in IT and 4+ in DevOps/SRE. Docker, Kubernetes, Terraform, CI/CD. Google Cloud certified. Available remote.',
        present: 'Present',
        ats_dominio: 'Domain',
        ats_stack: 'Core Stack',
        ats_cicd: 'CI/CD',
        ats_obs: 'Observability',
        ats_lang: 'Languages',
        ats_cloud: 'Cloud',
        ats_method: 'Methodology',
        ats_level: 'Level',
        ats_certs: 'Certifications',
        ats_english: 'English',
        ats_avail: 'Availability'
      }
    };

    // Get UI translation
    function t(key) { return i18nUI[currentLang][key] || i18nUI.es[key] || key; }

    // Get translated field from cv.json (falls back to ES base)
    function i18nField(data, field) {
      if (currentLang === 'es') return data[field];
      const en = data.i18n?.en;
      if (!en) return data[field];
      return en[field] !== undefined ? en[field] : data[field];
    }

    // Get translated experience (merges EN overrides onto ES base)
    function i18nExp(data, index) {
      const base = data.experiencia[index];
      if (currentLang === 'es') return base;
      const enExp = data.i18n?.en?.experiencia?.[index];
      if (!enExp) return base;
      return { ...base, ...enExp };
    }

    // Get translated education
    function i18nEdu(data, index) {
      const base = data.educacion[index];
      if (currentLang === 'es') return base;
      const enEdu = data.i18n?.en?.educacion?.[index];
      if (!enEdu) return base;
      return { ...base, ...enEdu };
    }

    // Get translated repo description
    function i18nRepo(data, index) {
      const base = data.github.repos_destacados[index];
      if (currentLang === 'es') return base;
      const enRepo = data.i18n?.en?.repos_destacados?.[index];
      if (!enRepo) return base;
      return { ...base, ...enRepo };
    }

    // Get labels_ats for current lang
    function i18nLabels(data) {
      if (currentLang === 'es') return data.meta.labels_ats;
      const enLabels = data.i18n?.en?.labels_ats;
      return enLabels ? { ...data.meta.labels_ats, ...enLabels } : data.meta.labels_ats;
    }

    // Get candidate_alignment for current lang
    function i18nAlignment(data) {
      const base = data.candidate_alignment;
      if (currentLang === 'es') return base;
      const enCA = data.i18n?.en?.candidate_alignment;
      return enCA ? { ...base, ...enCA } : base;
    }

    // Translate periodo "Presente" -> "Present"
    function i18nPeriodo(periodo) {
      if (currentLang === 'en') return periodo.replace('Presente', 'Present');
      return periodo;
    }

    // =========================================================================
    // Emisor colors
    // =========================================================================
    const emisorColors = {
      'Google': { bg: 'bg-blue-100 dark:bg-blue-900/40', text: 'text-blue-800 dark:text-blue-300' },
      'Coursera': { bg: 'bg-indigo-100 dark:bg-indigo-900/40', text: 'text-indigo-800 dark:text-indigo-300' },
      'EF SET': { bg: 'bg-emerald-100 dark:bg-emerald-900/40', text: 'text-emerald-800 dark:text-emerald-300' }
    };

    // =========================================================================
    // Render: Header
    // =========================================================================
    function renderHeader(data) {
      const p = data.personal;
      const el = document.getElementById('header');
      const waPhone = p.telefono.replace(/[+\s]/g, '');
      const perfil = i18nField(data, 'perfil');
      // Photo fallback chain: foto_url → GitHub avatar (from username)
      const ghUsername = data.github && data.github.username;
      const ghAvatar = ghUsername ? `https://avatars.githubusercontent.com/${ghUsername}` : '';
      const primaryPhoto = p.foto_url || ghAvatar;
      const fallbackPhoto = ghAvatar || p.foto_url || '';
      el.innerHTML = `
        <div class="p-8 md:p-10 flex flex-col md:flex-row items-center gap-8">
          <!-- Avatar -->
          <div class="flex-shrink-0 relative">
            <div class="w-32 h-32 md:w-40 md:h-40 rounded-full border-4 border-accent-violet overflow-hidden shadow-lg bg-gray-200 dark:bg-gray-700">
              <img src="${primaryPhoto}" alt="${p.nombre}" class="w-full h-full object-cover"
                   onerror="if(this.dataset.tried){this.style.display='none'}else{this.dataset.tried='1';this.src='${fallbackPhoto}'}">
            </div>
            ${p.disponible ? `<div class="absolute bottom-2 right-2 w-6 h-6 bg-accent-green border-4 border-white dark:border-navy-900 rounded-full" title="${t('available')}"></div>` : ''}
          </div>

          <!-- Info -->
          <div class="flex-grow text-center md:text-left space-y-3">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white tracking-tight">${p.nombre}</h1>
            <h2 class="text-xl text-gray-600 dark:text-gray-300 font-medium">${p.titulo}</h2>
            <p class="text-gray-500 dark:text-gray-400 leading-relaxed text-sm">${perfil}</p>
          </div>

          <!-- Contact -->
          <div class="flex flex-col items-center gap-4 md:min-w-[260px] border-t md:border-t-0 md:border-l border-gray-200 dark:border-gray-700 pt-6 md:pt-0 md:pl-8 mt-4 md:mt-0 flex-shrink-0">
            <!-- Email: full visible -->
            <a href="mailto:${p.email}" class="flex items-center justify-center gap-3 w-full text-gray-700 dark:text-gray-200 hover:text-accent-violet dark:hover:text-accent-violet transition-colors">
              <i class="fa-solid fa-envelope text-accent-violet text-lg"></i>
              <span class="text-sm font-medium">${p.email}</span>
            </a>

            <!-- Phone: full visible + WhatsApp -->
            <div class="flex items-center justify-center gap-3 w-full">
              <i class="fa-solid fa-phone text-accent-violet text-lg"></i>
              <span class="text-sm font-medium text-gray-700 dark:text-gray-200">${p.telefono}</span>
              <a href="https://api.whatsapp.com/send?phone=${waPhone}" target="_blank" rel="noopener" class="contact-icon-btn whatsapp ml-1" title="Chat en WhatsApp" style="width:32px;height:32px;">
                <i class="fa-brands fa-whatsapp text-base"></i>
              </a>
            </div>

            <!-- Location -->
            <div class="flex items-center justify-center gap-3 w-full text-gray-500 dark:text-gray-400">
              <i class="fa-solid fa-location-dot text-accent-violet text-lg"></i>
              <span class="text-sm">${p.ubicacion}</span>
            </div>

            <!-- Icon-only link buttons: distributed in mobile -->
            <div class="flex items-center justify-between w-full pt-2 px-4 md:px-0">
              <a href="${p.links.linkedin}" target="_blank" rel="noopener" class="contact-icon-btn" title="LinkedIn">
                <i class="fa-brands fa-linkedin-in text-lg"></i>
              </a>
              <a href="${p.links.github}" target="_blank" rel="noopener" class="contact-icon-btn" title="GitHub">
                <i class="fa-brands fa-github text-lg"></i>
              </a>
              <a href="${p.links.dockerhub}" target="_blank" rel="noopener" class="contact-icon-btn" title="Docker Hub">
                <i class="fa-brands fa-docker text-lg"></i>
              </a>
              <a href="${p.links.linktree}" target="_blank" rel="noopener" class="contact-icon-btn" title="Linktree">
                <i class="fa-solid fa-link text-lg"></i>
              </a>
            </div>

            <!-- Share CTA -->
            <button onclick="shareCV()" class="no-print share-btn inline-flex items-center gap-2 w-full justify-center px-4 py-2.5 rounded-xl bg-accent-violet text-white font-semibold text-sm mt-2 shadow-md">
              <i class="fa-solid fa-share-nodes"></i>
              ${t('shareCTA')}
            </button>
          </div>
        </div>
      `;
    }

    // =========================================================================
    // Render: Experiencia (cards con border-left)
    // =========================================================================
    function renderExperiencia(data) {
      const container = document.getElementById('experiencia');
      const cards = data.experiencia.map((baseExp, i) => {
        const exp = i18nExp(data, i);
        return `
        <article class="card-hover bg-white dark:bg-navy-800 rounded-xl shadow-lg p-6 border-l-4 ${i === 0 ? 'border-accent-violet' : 'border-gray-300 dark:border-gray-600'} border border-gray-200 dark:border-gray-700 relative overflow-hidden">
          <div class="flex flex-wrap justify-between items-start mb-2">
            <div class="flex-grow">
              <h4 class="text-lg font-bold text-gray-900 dark:text-white">${exp.cargo}, <span class="font-medium text-gray-600 dark:text-gray-400">${exp.empresa}</span></h4>
            </div>
            <span class="text-sm text-gray-500 dark:text-gray-400 font-medium whitespace-nowrap ml-4">${i18nPeriodo(exp.periodo)}</span>
          </div>

          <ul class="space-y-2">
            ${exp.logros.map(l => `
              <li class="flex items-start gap-2">
                <i class="fa-regular fa-circle-check text-green-500 dark:text-green-400 mt-1 flex-shrink-0"></i>
                <span class="text-gray-700 dark:text-gray-300 text-sm">${l}</span>
              </li>
            `).join('')}
          </ul>
        </article>
      `;
      }).join('');

      container.insertAdjacentHTML('beforeend', cards);
    }

    // =========================================================================
    // Render: Educacion
    // =========================================================================
    function renderEducacion(data) {
      const container = document.getElementById('educacion');
      const now = new Date();

      container.insertAdjacentHTML('beforeend', data.educacion.map((baseEdu, i) => {
        const edu = i18nEdu(data, i);

        // Extraer ano de graduacion del periodo (ej: "2009 – 2014" -> 2014)
        const endYearMatch = edu.periodo.match(/(\d{4})$/);
        const gradYear = endYearMatch ? parseInt(endYearMatch[1]) : null;

        // Calculo preciso: anos y meses desde julio del ano de graduacion
        let serviceLegend = '';
        if (gradYear) {
          const gradDate = new Date(gradYear, 6, 1);
          let years = now.getFullYear() - gradDate.getFullYear();
          let months = now.getMonth() - gradDate.getMonth();
          if (months < 0) { years--; months += 12; }
          const yStr = years > 0 ? `${years} ${years > 1 ? t('years') : t('year')}` : '';
          const mStr = months > 0 ? `${months} ${months > 1 ? t('months') : t('month')}` : '';
          if (yStr && mStr) {
            serviceLegend = t('serviceYears').replace('{y}', yStr).replace('{m}', mStr);
          } else if (yStr) {
            serviceLegend = t('serviceYearsOnly').replace('{y}', yStr);
          } else if (mStr) {
            serviceLegend = t('serviceMonthsOnly').replace('{m}', mStr);
          }
        }

        return `
        <div class="card-hover bg-white dark:bg-navy-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 relative overflow-hidden">
          <!-- Watermark decorativo -->
          <div class="no-print absolute -right-4 -bottom-4 text-gray-100 dark:text-gray-800/40 pointer-events-none">
            <i class="fa-solid fa-graduation-cap text-[120px] opacity-40"></i>
          </div>
          <!-- Contenido -->
          <div class="flex flex-col sm:flex-row items-center gap-4 sm:gap-5 p-5 relative z-10">
            <!-- Icono badge -->
            <div class="no-print flex-shrink-0 w-14 h-14 sm:w-16 sm:h-16 rounded-2xl bg-gradient-to-br from-accent-violet to-indigo-600 flex items-center justify-center shadow-lg">
              <i class="fa-solid fa-graduation-cap text-white text-xl sm:text-2xl"></i>
            </div>
            <!-- Info -->
            <div class="flex-grow min-w-0 text-center sm:text-left">
              <h4 class="font-bold text-gray-900 dark:text-white">${edu.titulo} <span class="font-normal text-sm text-gray-500 dark:text-gray-400">(${edu.periodo})</span></h4>
              <p class="text-accent-violet font-medium mt-0.5">${edu.institucion} · <span class="text-sm text-gray-500 dark:text-gray-400 font-normal">${edu.ubicacion}</span></p>
              ${serviceLegend ? `<p class="text-xs italic text-gray-400 dark:text-gray-500 mt-1">${serviceLegend}</p>` : ''}
            </div>
            <!-- Periodo badge -->
            <div class="no-print flex-shrink-0 hidden sm:flex flex-col items-center">
              <span class="text-2xl font-bold text-accent-violet">${gradYear || ''}</span>
              <span class="text-[10px] uppercase tracking-widest text-gray-400 dark:text-gray-500 font-semibold">grad</span>
            </div>
          </div>
        </div>
      `;
      }).join(''));
    }

    // =========================================================================
    // Render: Certificados
    // =========================================================================
    function renderCertificados(data) {
      const container = document.getElementById('certificados');
      container.insertAdjacentHTML('beforeend', `
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          ${data.certificados.map(cert => {
            const c = emisorColors[cert.emisor] || { bg: 'bg-gray-100 dark:bg-gray-800', text: 'text-gray-800 dark:text-gray-300' };
            return `
              <div class="card-hover bg-white dark:bg-navy-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 shadow-sm">
                <p class="font-medium text-sm text-gray-900 dark:text-white leading-tight">${cert.nombre}</p>
                <div class="flex items-center justify-between mt-2">
                  <span class="inline-block px-2 py-0.5 text-xs rounded-full font-medium ${c.bg} ${c.text}">${cert.emisor}</span>
                  <span class="text-xs text-gray-500 dark:text-gray-400">${cert.fecha}</span>
                </div>
                ${cert.detalle ? `<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">${cert.detalle}</p>` : ''}
              </div>
            `;
          }).join('')}
        </div>
      `);
    }

    // =========================================================================
    // Render: Core Skills (progress bars)
    // =========================================================================
    function renderCoreSkills(data) {
      const container = document.querySelector('#core-skills h4');
      const skills = data.core_skills;
      const half = Math.ceil(skills.length / 2);
      const col1 = skills.slice(0, half);
      const col2 = skills.slice(half);

      function renderCol(items) {
        return items.map(s => `
          <div class="skill-row" data-skill="${s.nombre}">
            <div class="flex justify-between items-center mb-1">
              <div class="flex items-center gap-2 text-gray-800 dark:text-gray-200 font-semibold text-sm">
                <i class="${s.icono} ${s.color}"></i> ${s.nombre}
              </div>
              <span class="text-xs font-bold text-gray-500 dark:text-gray-400">(${s.nivel}%)</span>
            </div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5">
              <div class="skill-bar-fill bg-accent-violet h-1.5 rounded-full" style="width: ${s.nivel}%" data-skill="${s.nombre}" data-nivel="${s.nivel}"></div>
            </div>
          </div>
        `).join('');
      }

      container.insertAdjacentHTML('afterend', `
        <div class="grid grid-cols-2 gap-x-6 gap-y-4">
          <div class="space-y-4">${renderCol(col1)}</div>
          <div class="space-y-4">${renderCol(col2)}</div>
        </div>
      `);
    }

    // =========================================================================
    // Render: Tools & Platforms (badges)
    // =========================================================================
    function renderToolsPlatforms(data) {
      const container = document.querySelector('#tools-platforms h4');
      container.insertAdjacentHTML('afterend', `
        <div class="flex flex-wrap gap-2">
          ${data.tools_platforms.map(tp => `
            <span class="tool-badge inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700/50 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"
                  data-related='${JSON.stringify(tp.related_core || [])}'>
              <i class="${tp.icono} text-accent-violet"></i> ${tp.nombre}
            </span>
          `).join('')}
        </div>
      `);
    }

    // =========================================================================
    // ATS Print: Candidate Alignment (print-only section)
    // =========================================================================
    function renderCandidateAlignment(data) {
      const ca = i18nAlignment(data);
      if (!ca) return;
      const labels = i18nLabels(data);
      const title = labels.alignment || 'Perfil Técnico';

      const entries = [
        [t('ats_dominio'), ca.dominio_principal],
        [t('ats_stack'), ca.stack_core],
        [t('ats_cicd'), ca.cicd],
        [t('ats_obs'), ca.observabilidad],
        [t('ats_lang'), ca.lenguajes],
        [t('ats_cloud'), ca.cloud],
        [t('ats_method'), ca.metodologia],
        [t('ats_level'), ca.nivel],
        [t('ats_certs'), ca.certificaciones_resumen],
        [t('ats_english'), ca.ingles],
        [t('ats_avail'), ca.disponibilidad]
      ];

      const section = document.createElement('div');
      section.id = 'candidate-alignment';
      section.className = 'print-only';
      section.innerHTML = `
        <h2>${title}</h2>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.1rem 1rem;font-size:0.82rem;">
          ${entries.map(([label, value]) => `
            <div style="display:flex;gap:0.25rem;line-height:1.35;"><strong style="min-width:90px;color:#4f46e5;font-weight:600;white-space:nowrap;">${label}:</strong><span>${value}</span></div>
          `).join('')}
        </div>
      `;

      const main = document.querySelector('main');
      main.parentNode.insertBefore(section, main);
    }

    // =========================================================================
    // ATS Print: Professional Summary (print-only)
    // =========================================================================
    function renderPrintSummary(data) {
      const summary = i18nField(data, 'perfil_ats') || i18nField(data, 'perfil');
      const labels = i18nLabels(data);
      const title = labels.summary || 'Resumen Profesional';

      const div = document.createElement('div');
      div.className = 'print-only';
      div.id = 'print-summary';
      div.innerHTML = `
        <h2>${title}</h2>
        <p style="font-size:0.85rem;line-height:1.4;margin-bottom:0.1rem;text-align:justify;">${summary}</p>
      `;

      const alignment = document.getElementById('candidate-alignment');
      const header = document.getElementById('header');
      const insertBefore = alignment || header.nextElementSibling;
      header.parentNode.insertBefore(div, insertBefore);
    }

    // =========================================================================
    // ATS Print: Skills as plain text (print-only)
    // =========================================================================
    function renderPrintSkills(data) {
      const labels = i18nLabels(data);
      const title = labels.skills || 'Competencias Técnicas';

      const skillsText = [...data.core_skills]
        .sort((a, b) => b.nivel - a.nivel)
        .map(s => `<strong style="color:#1a1a1a;">${s.nombre}</strong> <span style="color:#4f46e5;font-size:0.73rem;">(${s.nivel}%)</span>`)
        .join(' <span style="color:#d1d5db;"> \u00B7 </span>');

      const div = document.createElement('div');
      div.className = 'print-only';
      div.innerHTML = `
        <h2>${title}</h2>
        <p style="font-size:0.87rem;color:#1a1a1a;line-height:1.6;">${skillsText}</p>
      `;

      document.getElementById('core-skills').appendChild(div);
    }

    // =========================================================================
    // ATS Print: Tools as comma-separated text (print-only)
    // =========================================================================
    function renderPrintTools(data) {
      const labels = i18nLabels(data);
      const title = labels.tools || 'Herramientas y Plataformas';

      const toolsText = data.tools_platforms.map(tp => `<span style="color:#1a1a1a;">${tp.nombre}</span>`).join('<span style="color:#d1d5db;"> · </span>');

      const div = document.createElement('div');
      div.className = 'print-only';
      div.innerHTML = `
        <h2>${title}</h2>
        <p style="font-size:0.87rem;color:#1a1a1a;line-height:1.6;">${toolsText}</p>
      `;

      document.getElementById('tools-platforms').appendChild(div);
    }

    // =========================================================================
    // Interactive: Tools → Core Skills reactive linking
    // =========================================================================
    function initToolsCoreReactive() {
      const badges = document.querySelectorAll('.tool-badge');
      const allBars = document.querySelectorAll('.skill-bar-fill');
      const allRows = document.querySelectorAll('.skill-row');
      let animTimers = [];

      badges.forEach(badge => {
        const related = JSON.parse(badge.dataset.related || '[]');

        badge.addEventListener('mouseenter', () => {
          // Clear pending timers
          animTimers.forEach(tid => clearTimeout(tid));
          animTimers = [];

          badge.classList.add('active');

          // Dim all rows, highlight related
          allRows.forEach(row => {
            const skill = row.dataset.skill;
            if (related.includes(skill)) {
              row.classList.add('highlighted');
              row.classList.remove('dimmed');
            } else {
              row.classList.add('dimmed');
              row.classList.remove('highlighted');
            }
          });

          // Animate related bars: green + download progress effect
          allBars.forEach(bar => {
            const skill = bar.dataset.skill;
            if (related.includes(skill)) {
              // Step 1: Disable transition, set to 0%, change color
              bar.style.transition = 'none';
              bar.style.width = '0%';
              bar.classList.add('highlight');
              // Step 2: Force reflow to register 0% state
              bar.offsetWidth;
              // Step 3: Re-enable transition and animate to target
              bar.style.transition = 'background-color 0.4s ease, width 1s ease';
              const tid = setTimeout(() => {
                bar.style.width = bar.dataset.nivel + '%';
              }, 30);
              animTimers.push(tid);
            }
          });
        });

        badge.addEventListener('mouseleave', () => {
          // Clear pending timers
          animTimers.forEach(tid => clearTimeout(tid));
          animTimers = [];

          badge.classList.remove('active');

          // Restore all rows
          allRows.forEach(row => {
            row.classList.remove('highlighted', 'dimmed');
          });

          // Restore bars to violet with transition
          allBars.forEach(bar => {
            bar.classList.remove('highlight');
            bar.style.transition = 'background-color 0.4s ease, width 0.5s ease';
            bar.style.width = bar.dataset.nivel + '%';
          });
        });
      });
    }

    // =========================================================================
    // Render: GitHub Activity (heatmap + stats)
    // =========================================================================
    function renderGitHubActivity(data) {
      const gh = data.github;
      const container = document.getElementById('github-activity');

      // Seeded random for consistent heatmap
      function seededRandom(seed) {
        let s = seed;
        return function() { s = (s * 16807 + 0) % 2147483647; return s / 2147483647; };
      }
      const rand = seededRandom(42);
      const levels = ['bg-gray-100 dark:bg-gray-700', 'bg-green-200 dark:bg-green-900', 'bg-green-400 dark:bg-green-700', 'bg-green-500 dark:bg-green-600', 'bg-green-600 dark:bg-green-500'];
      const quarterLabels = ['Q1 (Jan–Mar)', 'Q2 (Apr–Jun)', 'Q3 (Jul–Sep)', 'Q4 (Oct–Dec)'];
      const weeksPerQuarter = 13; // ~13 weeks per quarter

      // Generate quarterly heatmaps
      let quartersHTML = '';
      for (let q = 0; q < 4; q++) {
        let cells = '';
        for (let i = 0; i < 7 * weeksPerQuarter; i++) {
          const r = rand();
          const lvl = r > 0.7 ? (r > 0.85 ? (r > 0.93 ? 3 : 2) : 1) : 0;
          const activeClass = lvl > 0 ? 'heatmap-cell-active' : '';
          const delay = lvl > 0 ? `animation-delay: ${(q * 0.5 + (i % 7) * 0.1).toFixed(1)}s;` : '';
          cells += `<div class="w-2.5 h-2.5 rounded-sm ${levels[lvl]} ${activeClass}" style="${delay}"></div>`;
        }
        quartersHTML += `
          <div>
            <div class="text-[10px] font-semibold text-accent-violet mb-1">${quarterLabels[q]}</div>
            <div class="grid grid-rows-7 grid-flow-col gap-[2px]">
              ${cells}
            </div>
          </div>
        `;
      }

      container.innerHTML = `
        <div class="flex justify-between items-center mb-4">
          <h4 class="text-lg font-bold text-gray-900 dark:text-white">
            <i class="fa-brands fa-github mr-2"></i>GitHub Activity
          </h4>
          <span class="text-xs text-gray-500 dark:text-gray-400">Last Year: <strong class="text-gray-900 dark:text-white">${gh.stats.contributions_last_year} Contributions</strong></span>
        </div>

        <!-- Quarterly Heatmap -->
        <div class="w-full overflow-hidden mb-5">
          <div class="flex gap-2">
            <div class="flex flex-col justify-between text-[10px] text-gray-400 py-4" style="min-width:24px;">
              <span></span><span>Mon</span><span></span><span>Wed</span><span></span><span>Fri</span><span></span>
            </div>
            <div class="flex-grow grid grid-cols-4 gap-3">
              ${quartersHTML}
            </div>
          </div>
          <div class="flex justify-end items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 mt-2">
            <span>Less</span>
            ${levels.map(l => `<div class="w-2.5 h-2.5 ${l} rounded-sm"></div>`).join('')}
            <span>More</span>
          </div>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-3 gap-2 text-center border-t border-gray-100 dark:border-gray-700 pt-4">
          <div>
            <div class="text-lg font-bold text-gray-900 dark:text-white">${gh.stats.repos}</div>
            <div class="text-xs text-gray-500 dark:text-gray-400">Repos</div>
          </div>
          <div>
            <div class="text-lg font-bold text-gray-900 dark:text-white">${gh.stats.stars}</div>
            <div class="text-xs text-gray-500 dark:text-gray-400">Stars</div>
          </div>
          <div>
            <div class="text-lg font-bold text-gray-900 dark:text-white">${gh.stats.contributions_last_year}</div>
            <div class="text-xs text-gray-500 dark:text-gray-400">Contributions</div>
          </div>
        </div>

        <!-- Repos -->
        <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 space-y-2">
          ${gh.repos_destacados.map((r, idx) => {
            const repo = i18nRepo(data, idx);
            return `
            <a href="${r.url}" target="_blank" rel="noopener" class="card-hover block p-3 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-accent-violet dark:hover:border-accent-violet transition-colors bg-gray-50 dark:bg-navy-900/50">
              <div class="flex items-center gap-2">
                <i class="fa-solid fa-folder text-gray-400"></i>
                <span class="font-medium text-sm text-accent-violet">${r.nombre}</span>
              </div>
              <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">${repo.descripcion}</p>
              <div class="flex items-center gap-3 mt-2">
                <span class="inline-flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400">
                  <span class="w-2 h-2 rounded-full ${r.lenguaje === 'TypeScript' ? 'bg-blue-500' : 'bg-yellow-500'}"></span>
                  ${r.lenguaje}
                </span>
                ${r.stars > 0 ? `<span class="inline-flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400"><i class="fa-solid fa-star text-yellow-500"></i> ${r.stars}</span>` : ''}
              </div>
            </a>
          `;}).join('')}
        </div>

      `;
    }

    // =========================================================================
    // Dark mode toggle
    // =========================================================================
    function initDarkMode() {
      const toggle = document.getElementById('theme-toggle');
      const icon = document.getElementById('icon-theme');

      function updateIcon() {
        const isDark = document.documentElement.classList.contains('dark');
        icon.className = isDark ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
      }

      toggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        const isDark = document.documentElement.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        updateIcon();
      });

      updateIcon();
    }

    // =========================================================================
    // Scroll animations
    // =========================================================================
    function initScrollAnimations() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
    }

    // =========================================================================
    // Mobile: progressive scroll zoom on cards
    // =========================================================================
    function initMobileCardZoom() {
      // Only on touch/mobile devices (no hover capability)
      if (window.matchMedia('(hover: hover)').matches) return;

      const cards = document.querySelectorAll('.card-hover');

      function updateCardScales() {
        const vh = window.innerHeight;
        const center = vh * 0.45; // sweet spot: slightly above center

        cards.forEach(card => {
          const rect = card.getBoundingClientRect();
          const cardCenter = rect.top + rect.height / 2;
          // Distance from viewport sweet spot (0 = perfectly centered)
          const dist = Math.abs(cardCenter - center);
          const maxDist = vh * 0.6;
          // Scale: 1.0 (far) → 1.03 (centered)
          const proximity = Math.max(0, 1 - dist / maxDist);
          const scale = 1 + proximity * 0.03;
          // Shadow intensity follows scale
          const shadow = proximity * 0.2;

          card.style.transform = `scale(${scale.toFixed(4)})`;
          card.style.boxShadow = shadow > 0.02
            ? `0 ${(shadow * 60).toFixed(0)}px ${(shadow * 100).toFixed(0)}px -12px rgba(0,0,0,${shadow.toFixed(2)})`
            : 'none';
        });
      }

      // Throttle with rAF for smooth 60fps
      let ticking = false;
      window.addEventListener('scroll', () => {
        if (!ticking) {
          requestAnimationFrame(() => {
            updateCardScales();
            ticking = false;
          });
          ticking = true;
        }
      }, { passive: true });

      // Initial pass
      updateCardScales();
    }

    // =========================================================================
    // Back to Top
    // =========================================================================
    function initBackToTop() {
      const btn = document.getElementById('btn-back-top');
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          btn.classList.add('visible');
        } else {
          btn.classList.remove('visible');
        }
      }, { passive: true });

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }

    // =========================================================================
    // Share CV: Web Share API with clipboard fallback
    // =========================================================================
    function shareCV() {
      const shareData = {
        title: 'Anthony Cruz — DevOps Developer',
        text: t('shareText'),
        url: window.location.href
      };

      if (navigator.share) {
        navigator.share(shareData).catch(() => {});
      } else {
        navigator.clipboard.writeText(shareData.url).then(() => {
          showToast(t('linkCopied'));
        }).catch(() => {
          // Fallback for older browsers
          const ta = document.createElement('textarea');
          ta.value = shareData.url;
          ta.style.position = 'fixed';
          ta.style.opacity = '0';
          document.body.appendChild(ta);
          ta.select();
          document.execCommand('copy');
          document.body.removeChild(ta);
          showToast(t('linkCopied'));
        });
      }
    }

    function showToast(msg) {
      let toast = document.getElementById('share-toast');
      if (!toast) {
        toast = document.createElement('div');
        toast.id = 'share-toast';
        toast.className = 'toast';
        document.body.appendChild(toast);
      }
      toast.innerHTML = `<i class="fa-solid fa-check-circle mr-2 text-accent-green"></i>${msg}`;
      requestAnimationFrame(() => {
        toast.classList.add('visible');
        setTimeout(() => toast.classList.remove('visible'), 2500);
      });
    }

    // =========================================================================
    // Download CV: sets filename with date, then triggers print
    // =========================================================================
    function downloadCV() {
      const originalTitle = document.title;
      const today = new Date();
      const y = today.getFullYear();
      const m = String(today.getMonth() + 1).padStart(2, '0');
      const d = String(today.getDate()).padStart(2, '0');
      document.title = `Anthony_Cruz_CV_${y}-${m}-${d}`;
      window.print();
      // Restore title after print dialog closes
      setTimeout(() => { document.title = originalTitle; }, 500);
    }

    // =========================================================================
    // Render All: renders or re-renders all sections
    // =========================================================================
    function renderAll(data) {
      // Clear dynamic content (keep h2 headings in static HTML)
      document.querySelectorAll('#experiencia article, #experiencia .card-hover').forEach(el => el.remove());
      document.querySelectorAll('#educacion .card-hover').forEach(el => el.remove());
      document.querySelectorAll('#certificados .grid').forEach(el => el.remove());
      document.querySelectorAll('#core-skills .grid, #core-skills .print-only').forEach(el => el.remove());
      document.querySelectorAll('#tools-platforms .flex-wrap, #tools-platforms .print-only').forEach(el => el.remove());

      // Remove print-only sections (re-created each render)
      document.getElementById('print-summary')?.remove();
      document.getElementById('candidate-alignment')?.remove();

      // Update section headings
      const expH2 = document.querySelector('#experiencia h2');
      if (expH2) {
        expH2.querySelector('.print-hide').textContent = t('infraExperience');
        const printSpan = expH2.querySelector('.print-only');
        if (printSpan) printSpan.textContent = i18nLabels(data).experiencia || 'Experiencia Profesional';
      }
      const eduHeadingText = document.getElementById('edu-heading-text');
      if (eduHeadingText) eduHeadingText.textContent = t('education');
      const certH2 = document.querySelector('#certificados h2');
      if (certH2) {
        certH2.querySelector('.print-hide').textContent = t('certificates');
        const printSpan = certH2.querySelector('.print-only');
        if (printSpan) printSpan.textContent = i18nLabels(data).certificados || 'Certificaciones';
      }
      const stacksHeadingText = document.getElementById('stacks-heading-text');
      if (stacksHeadingText) stacksHeadingText.textContent = t('stacks');

      // Update footer buttons text
      const dlBtn = document.querySelector('[onclick="downloadCV()"]');
      if (dlBtn) dlBtn.innerHTML = `<i class="fa-solid fa-file-arrow-down text-base"></i> ${t('downloadCV')}`;
      const shareFooterBtn = document.querySelector('footer .share-btn');
      if (shareFooterBtn) shareFooterBtn.innerHTML = `<i class="fa-solid fa-share-nodes"></i> ${t('referProfile')}`;

      // Render content sections
      renderHeader(data);
      renderExperiencia(data);
      renderEducacion(data);
      renderCertificados(data);
      renderCoreSkills(data);
      renderToolsPlatforms(data);
      renderGitHubActivity(data);

      // ATS print-only sections
      renderPrintSummary(data);
      renderCandidateAlignment(data);
      renderPrintSkills(data);
      renderPrintTools(data);

      // Footer
      document.getElementById('footer-contact').href = `mailto:${data.personal.email}`;
      document.getElementById('footer-github').href = data.personal.links.github;
      document.getElementById('footer-updated').textContent = `v${data.meta.version} · ${data.meta.last_updated}`;

      // Update html lang attribute
      document.documentElement.lang = currentLang === 'en' ? 'en' : 'es';

      // Re-init interactive features
      initToolsCoreReactive();
    }

    // =========================================================================
    // Language toggle
    // =========================================================================
    function initLangToggle() {
      const btnES = document.getElementById('lang-es');
      const btnEN = document.getElementById('lang-en');

      function updateActive() {
        btnES.classList.toggle('active', currentLang === 'es');
        btnEN.classList.toggle('active', currentLang === 'en');
      }

      function switchTo(lang) {
        if (currentLang === lang) return;
        currentLang = lang;
        localStorage.setItem('lang', currentLang);
        updateActive();
        if (cvData) renderAll(cvData);
      }

      btnES.addEventListener('click', () => switchTo('es'));
      btnEN.addEventListener('click', () => switchTo('en'));

      updateActive();
    }

    // =========================================================================
    // Main
    // =========================================================================
    async function loadCV() {
      try {
        const res = await fetch('data/cv.json');
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        cvData = await res.json();

        renderAll(cvData);

        // Show
        document.getElementById('loading').classList.add('hidden');
        document.getElementById('app').classList.remove('hidden');

        initDarkMode();
        initLangToggle();
        initScrollAnimations();
        initMobileCardZoom();
        initBackToTop();
      } catch (err) {
        document.getElementById('loading').innerHTML = `
          <div class="text-center text-red-500">
            <p class="text-lg font-bold">Error cargando CV</p>
            <p class="text-sm mt-2">${err.message}</p>
            <p class="text-xs mt-4 text-gray-500">Sirve esta pagina desde un servidor HTTP.</p>
          </div>
        `;
      }
    }

    loadCV();
  </script>
</body>
</html>
